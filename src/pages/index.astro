---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import FeaturedRecipes from '@/components/FeaturedRecipes.astro';
import HeroSection from '@/components/HeroSection.astro';
import Categories from '@/components/Categories.astro';
import Notice from '@/components/Notice.astro';

const recipes = await getCollection('recipes');
const categories = recipes
  .map((recipe) => recipe.data.category)
  .reduce<{ [key: string]: number }>(function (result, curr) {
    let count = result[curr] || 0;
    result[curr] = count + 1;
    return result;
  }, {});
---

<BaseLayout title="নীড়পাতা">
  <HeroSection />
  <FeaturedRecipes recipes={recipes} />
  <Categories categories={categories} />
  <section class="pt-9 pb-16">
    <Notice variant="notice">
      আপনার রেসিপি শেয়ার করতে চান?
      <a
        class="text-chilli-600 hover:text-chilli-700 ease-in-out duration-300"
        href="/">এখানে বিস্তারিত দেখুন</a
      >
    </Notice>
  </section>
</BaseLayout>
